<!DOCTYPE html>
<html>
  <head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="icon" href="/favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="app.css">
    <title>Such Cute - 网页 / JSON转换器</title>
  </head>
  <body>
    <div class="container en">
      <h1>Such-Cute</h1>
      <p><b>* 网页 / JSON转换器  (<a href="http://vitovan.github.io/such-cute/">English Version</a>)</b></p>
      <p>基于 <a href="https://github.com/VitoVan/cl-spider">cl-spider</a>，源码在 <a href="https://github.com/VitoVan/such-cute">这里</a>，你可能会想看一下这篇文章：<a href="http://vitovan.com/webspider-cn.html">《爬虫: 零编程将网页转换为JSON》</a>。</p>
      <hr>
      <h2>用法：</h2>
      <p><b>******** get ********</b></p>
      <p>- 根据提供的 uri 获取网页 DOM 树，根据所提供的 selector 获取相应节点，然后再获取对应的属性，最后转化为 JSON。</p>
      <p>调用地址： <b>http://localhost:5000/get</b></p>
      <p>参数：
        <ul>
          <li>uri --- 页面地址。例：<i>https://news.ycombinator.com/</i></li>
          <li>selector --- css 选择器。例：<i>a</i> or <i>tr.athing</i>，更多参见：<a href="http://www.w3school.com.cn/cssref/css_selectors.asp">CSS 选择器参考手册</a></li>
          <li>attrs --- 节点属性，应当为 JSON 格式的列表，属性可设置别名。例：<i>["text","href"]</i> 或 <i>["text as title","href as uri"]</i></li>
          <li>params --- 请求参数，JSON列表。例： <i>["name as vito","sex as alien"]</i></li>
          <li>callback --- JSONP 回调函数。</li>
        </ul>
      </p>
      <p>例：</p>
      <p><i>http://localhost:5000/get?uri=https://news.ycombinator.com/&selector=a&attrs=["text","href"]</i></p>
      <p><i>http://localhost:5000/get?uri=https://news.ycombinator.com/&selector=a&attrs=["text as title","href as uri"]</i></p>
      <p><i>http://localhost:5000/get?uri=https://news.ycombinator.com/&selector=a&attrs=["text as title","href as uri"]&callback=myfunction</i></p>
      <p><i>http://localhost:5000/get?uri=https://news.ycombinator.com/user&selector=table[id=hnmain]>tr:nth-child(3)>td>table>tr&attrs=["text"]&#38;params=["id as VitoVan"]</i></p>
      
      <p><b>******** get-block ********</b></p>
      <p>- 根据提供的 uri 获取网页 DOM 树，根据所提供的 selector 获取相应节点，再获取其中的子节点，然后再获取对应的属性，最后转化为 JSON。</p>
      <p>调用地址： <b>http://localhost:5000/get-block</b></p>
      <p>参数：
        <ul>
          <li>uri --- 页面地址。例：<i>https://news.ycombinator.com/</i></li>
          <li>selector --- css 选择器。例：<i>a</i> or <i>tr.athing</i>，更多参见：<a href="http://www.w3school.com.cn/cssref/css_selectors.asp">CSS 选择器参考手册</a></li>
          <li>desires --- 字节点以及其对应的属性，一个 desire 由一个 css 选择器和一个或多个属性组成，应当为 JSON 格式的列表。例： <i>[{"selector":"td.title>a","attrs":["href","text"]}]</i> 或 <br><i>[{"selector":"span.rank","attrs":["text as rank"]},{"selector":"td.title>a","attrs":["href as uri","text as title"]},{"selector":"span.sitebit.comhead","attrs":["text as site"]}]</i></li>
          <li>callback --- JSONP 回调函数。</li>
        </ul>
      </p>
      <p>例：</p>
      <p><i>http://localhost:5000/get-block?uri=https://news.ycombinator.com/&selector=tr.athing&desires=[{"selector":"span.rank","attrs":["text as rank"]},{"selector":"td.title>a","attrs":["href as uri","text as title"]},{"selector":"span.sitebit.comhead","attrs":["text as site"]}]</i></p>
      <p><i>http://localhost:5000/get-block?uri=https://news.ycombinator.com/&selector=tr.athing&desires=[{"selector":"span.rank","attrs":["text as rank"]},{"selector":"td.title>a","attrs":["href as uri","text as title"]},{"selector":"span.sitebit.comhead","attrs":["text as site"]}]&callback=myfunction</i></p>
      <hr>
      <p>* 每个请求页面有两分钟的缓存</p>
      <p>* localhost:5000 是测试服务器，无法保证其稳定性，请勿在生产中使用。</p>
    </div>
  </body>
</html>
